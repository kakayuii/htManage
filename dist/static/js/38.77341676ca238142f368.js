webpackJsonp([38],{"1ruJ":function(e,t,n){var a=n("KjAa");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("2b23f6b3",a,!1,{})},KjAa:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"questionlist.vue",sourceRoot:""}])},h26I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),l=n("Gu7T"),r=n.n(l),s=n("exGp"),o=n.n(s),c=n("J4ec"),u={data:function(){return{loading:!0,deletelist:[],list:[],allList:[],Page:1,PageSize:10,typeoptions:[{typeName:"全部",typeId:""}],replyStateoptions:[{name:"全部",id:""},{id:1,name:"新提问"},{id:2,name:"交付第三方"},{id:3,name:"已回复"},{id:4,name:"完成"},{name:"回收桶",id:"-1"}],typeName:{1:"新提问",2:"交付第三方",3:"已回复",4:"完成"},type:"",replyState:"",search:""}},created:function(){this.getList()},methods:{getList:function(){var e=this;return o()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,c.default.loveQuestion.QuestionList();case 3:n=t.sent,e.list=n,e.allList=[].concat(r()(n)),e.searching(),e.loading=!1,a={},e.list.forEach(function(t){var n=t.typeName,i=t.typeId;t.replyState,t.replyStateName;a[n]||(a[n]=!0,e.typeoptions.push({typeName:n,typeId:i}))});case 10:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.PageSize=e},handleCurrentChange:function(e){this.Page=e},searching:function(){var e=this;this.Page=1;var t=["toUserName","firstContent","typeName"];this.list=this.allList.filter(function(n){var a=[];t.forEach(function(e){a.push(n[e])});var i=a.some(function(t){return(t+="").includes(e.search)}),l=!0,r=!0;return e.type&&(l=n.typeId==e.type),e.replyState&&(r=-1==e.replyState?1==n.deleteFlag:n.replyState==e.replyState),i&&l&&r});var n=-1==this.replyState?1:0;this.list=this.list.filter(function(e){return e.deleteFlag==n})},gotoFetch:function(e){this.$router.push({name:"lovequestioncommit",params:{id:e}})},undeleteLoveQuestion:function(e){var t=this;c.default.loveQuestion.unDeleteLoveQuestion(e).then(function(e){t.replyState="",t.$message.success("移出成功"),t.getList()})}},computed:{showList:function(){return this.list.slice((this.Page-1)*this.PageSize,this.Page*this.PageSize)}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{directives:[{name:"title",rawName:"v-title"}]},[e._v("爱记忆提问管理")]),e._v(" "),n("el-card",{staticClass:"search-box"},[n("el-select",{attrs:{clearable:!0,placeholder:"选择类型"},on:{change:e.searching},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeoptions,function(e){return n("el-option",{key:e.typeId,attrs:{label:e.typeName,value:e.typeId}})})),e._v(" "),n("el-select",{attrs:{clearable:!0,placeholder:"选择回复状态"},on:{change:e.searching},model:{value:e.replyState,callback:function(t){e.replyState=t},expression:"replyState"}},e._l(e.replyStateoptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),n("el-input",{staticStyle:{width:"360px"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return e.searching(t)}},model:{value:e.search,callback:function(t){e.search="string"==typeof t?t.trim():t},expression:"search"}}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searching()}}},[e._v("搜索")])],1),e._v(" "),n("el-card",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.showList,border:"","element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",stripe:!0,width:"100%"}},[n("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"toUserName",label:"提问者"}}),e._v(" "),n("el-table-column",{attrs:{prop:"typeName",label:"类型"}}),e._v(" "),n("el-table-column",{attrs:{prop:"firstContent",label:"提问内容","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("stringSlice")(t.row.firstContent,100))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"replyStateName",label:"回复状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.typeName[t.row.replyState])+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"creationTime",label:"新增时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("timeFilter")(t.row.creationTime))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"最后信息时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("timeFilter")(t.row.updateTime))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.deleteFlag?n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.undeleteLoveQuestion(t.row.id)}}},[e._v("移出回收桶\n          ")]):n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.gotoFetch(t.row.id)}}},[e._v("处理")])]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.Page,"page-sizes":[10,30,50,100],"page-size":e.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)};p._withStripped=!0;var d={render:p,staticRenderFns:[]},f=d;var h=!1;var v=n("VU/8")(u,f,!1,function(e){h||n("1ruJ")},"data-v-0e7782a6",null);v.options.__file="src/pages/love/questionlist.vue";t.default=v.exports}});