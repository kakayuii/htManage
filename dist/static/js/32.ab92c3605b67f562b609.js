webpackJsonp([32],{HDPg:function(t,e,a){var n=a("Oc0V");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("938a85d6",n,!1,{})},Oc0V:function(t,e,a){(t.exports=a("FZ+f")(!0)).push([t.i,"\n.align-center[data-v-3e940106] {\n  text-align: center;\n  margin: 20px 0 10px;\n}\n.align-right[data-v-3e940106] {\n  text-align: right;\n  margin-bottom: 10px;\n}\n.align-left[data-v-3e940106] {\n  text-align: left;\n  margin-bottom: 10px;\n}\n.head-img[data-v-3e940106] {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  margin-bottom: 10px;\n}\n.tag-txt[data-v-3e940106] {\n  margin-right: 10px;\n}\n","",{version:3,sources:["D:/git/vue-manage/src/pages/love/questioncommit.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,oBAAoB;CACrB;AACD;EACE,kBAAkB;EAClB,oBAAoB;CACrB;AACD;EACE,iBAAiB;EACjB,oBAAoB;CACrB;AACD;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,oBAAoB;CACrB;AACD;EACE,mBAAmB;CACpB",file:"questioncommit.vue",sourcesContent:["\n.align-center[data-v-3e940106] {\n  text-align: center;\n  margin: 20px 0 10px;\n}\n.align-right[data-v-3e940106] {\n  text-align: right;\n  margin-bottom: 10px;\n}\n.align-left[data-v-3e940106] {\n  text-align: left;\n  margin-bottom: 10px;\n}\n.head-img[data-v-3e940106] {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  margin-bottom: 10px;\n}\n.tag-txt[data-v-3e940106] {\n  margin-right: 10px;\n}\n"],sourceRoot:""}])},QhmH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=a("Dd8w"),i=a.n(r),s=a("Xxa5"),o=a.n(s),l=a("exGp"),u=a.n(l),c=a("Zx67"),d=a.n(c),m=a("Zrlr"),p=a.n(m),f=a("wxAW"),v=a.n(f),g=a("zwoO"),h=a.n(g),_=a("Pf15"),x=a.n(_),A=a("c+8m"),b=a.n(A),y=a("1Sv2"),C=a("6UR1"),k=a("J4ec"),w=a("2UfB"),B=a("uaSg"),D=b()({components:{uploadImg:w.a},props:{id:0}})(n=function(t){function e(){var t,a,n,r;p()(this,e);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=h()(this,(t=e.__proto__||d()(e)).call.apply(t,[this].concat(s))),n.commintList=[],n.gwPictureId=0,n.upLoadUrl="../../../static/img/men.png",n.userInfo={},n.qualificationList=["初中及以下","高中","专科","本科","硕士","博士"],n.tagName=["无"],n.otherDisease="",n.arr=[{isStart:"未进行"},{isStart:"未进行"},{isStart:"未进行"}],n.age="未设定",n.form1={questionId:0,replyState:""},n.form2={replyContent:"",replyId:0,nickName:"",birthDate:"",gender:"",qualification:0},n.replyStateoptions=C.d,n.rules1={replyState:[{required:!0,message:"请输入名称",trigger:"blur"}]},n.rules2={replyContent:[{required:!0,message:"请输入内容",trigger:"blur"}]},r=a,h()(n,r)}return x()(e,t),v()(e,[{key:"getAvatar",value:function(t){this.gwPictureId=t}},{key:"changeQuestion",value:function(t){var e,a=this;this.$refs[t].validate((e=u()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return t.next=3,k.default.loveQuestion.changeQuestionState(a.form1);case 3:return t.sent,t.next=6,a.$message("状态变更成功");case 6:a.getDate(a.id),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,a)})),function(t){return e.apply(this,arguments)}))}},{key:"deleteQuestion",value:function(t){var e=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.default.loveQuestion.deleteQuestionState(e.form1);case 2:return t.sent,t.next=5,e.$message.success("删除成功");case 5:e.$router.go(-1);case 6:case"end":return t.stop()}},t,e)})))}},{key:"onSubmit",value:function(t){var e,a=this;this.$refs[t].validate((e=u()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return t.next=3,k.default.loveQuestion.sendLoveQuestion(a.form2);case 3:return t.sent,t.next=6,a.$message.success("发送成功");case 6:a.getDate(a.id),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,a)})),function(t){return e.apply(this,arguments)}))}},{key:"onBack",value:function(){this.$router.push({name:"lovequestionlist",params:{}})}},{key:"onDel",value:function(t){var e=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:k.default.loveQuestion.delReply({id:t,questionId:e.id}).then(function(t){e.$message.success("删除成功"),e.getDate(e.id)}).catch(function(t){var a=t.msg?t.msg:"服务器错误";e.$message.error(a)});case 1:case"end":return a.stop()}},a,e)})))}},{key:"created",value:function(){this.getDate(this.id)}},{key:"getDate",value:function(){var t=u()(o.a.mark(function t(e){var a,n,r=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.default.loveQuestion.getQuestion(e);case 2:return a=t.sent,this.form1.questionId=a.data.id,this.form1.replyState=a.data.replyState,this.form2={replyId:a.data.id,replyContent:""},this.commintList=[{nickName:a.data.questionUserName,creationTime:a.data.creationTime,content:a.data.firstContent,id:a.data.id,delete_state:1}],void 0!=a.data2&&a.data2.length>0&&a.data2.forEach(function(t){r.commintList.push({nickName:t.toUserName,creationTime:t.creationTime,content:t.replyContent,id:t.id,delete_state:t.delete_state})}),this.userInfo=a.data.user,this.age=this.userAge(a.data.user.birthDate),console.log(this.userAge(a.data.user.birthDate)),this.otherDisease=a.data.otherDisease,a.data.user.gwPictureId?this.upLoadUrl=B.a+"ijy/api/binaryFile/"+a.data.user.gwPictureId:this.upLoadUrl="../../../static/img/men.png",n={uid:a.data.user.id},t.next=16,k.default.loveQuestion.questionNaire(n);case 16:t.sent.forEach(function(t){r.arr[t.type-1]=i()({},r.arr[t.type-1],t)}),0!=a.data.tagName.length&&(this.tagName=a.data.tagName);case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"userAge",value:function(t){var e=t.substring(0,4),a=void 0,n=(new Date).getFullYear();if(n==e)a=0;else{var r=n-e;a=r>0?r:0}return a}}]),e}(y.a))||n,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{directives:[{name:"title",rawName:"v-title"}]},[t._v("爱记忆提问管理")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form",{ref:"form1",attrs:{model:t.form1,rules:t.rules1,"label-width":"80px"}},[a("el-card",[a("el-form-item",{attrs:{label:"类型",prop:"replyState"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form1.replyState,callback:function(e){t.$set(t.form1,"replyState",e)},expression:"form1.replyState"}},t._l(t.replyStateoptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changeQuestion("form1")}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteQuestion("form1")}}},[t._v("删除")])],1),t._v(" "),a("el-form-item",{attrs:{label:"提问标签",prop:"tagName"}},t._l(t.tagName,function(e){return a("span",{staticClass:"tag-txt",attrs:{label:e,value:e}},[t._v(t._s(e))])})),t._v(" "),a("el-form-item",{attrs:{label:"其他疾病",prop:"otherDisease"}},[a("span",[t._v(t._s(t.otherDisease?t.otherDisease:"无"))])])],1)],1),t._v(" "),a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2,"label-width":"80px"}},[a("el-card",[a("el-form-item",{attrs:{label:"回复内容",prop:"replyContent"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form2.replyContent,callback:function(e){t.$set(t.form2,"replyContent",e)},expression:"form2.replyContent"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("form2")}}},[t._v("发送")]),t._v(" "),a("el-button",{on:{click:function(e){t.onBack()}}},[t._v("取消")])],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"align-center"},[a("img",{staticClass:"head-img",attrs:{src:t.upLoadUrl}}),t._v(" "),a("div",[t._v(t._s(t.userInfo.nickName?t.userInfo.nickName:"尚未设定昵称"))])])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"align-right"},[t._v("年龄")]),t._v(" "),a("div",{staticClass:"align-right"},[t._v("性别")]),t._v(" "),a("div",{staticClass:"align-right"},[t._v("文化程度")]),t._v(" "),a("div",{staticClass:"align-right"},[t._v("脑功能测评结果")]),t._v(" "),a("div",{staticClass:"align-right"},[t._v("深度脑功能结果")]),t._v(" "),a("div",{staticClass:"align-right"},[t._v("情绪测试结果")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"align-left"},[t._v(t._s(t.age))]),t._v(" "),"M"==t.userInfo.gender?a("div",{staticClass:"align-left"},[t._v("男")]):(t.userInfo.gender,a("div",{staticClass:"align-left"},[t._v("女")])),t._v(" "),t.userInfo.qualification?a("div",{staticClass:"align-left"},[t._v(t._s(t.qualificationList[t.userInfo.qualification]))]):a("div",{staticClass:"align-left"},[t._v("未设定")]),t._v(" "),t._l(t.arr,function(e){return a("div",{staticClass:"align-left",attrs:{label:e,value:e}},[t._v(t._s(e.conclusion?e.conclusion:e.isStart))])})],2)],1)],1)],1),t._v(" "),a("el-card",[a("el-table",{attrs:{data:t.commintList,border:"",size:"small",stripe:!0,width:"100%"}},[a("el-table-column",{attrs:{prop:"nickName",label:"提问者"}}),t._v(" "),a("el-table-column",{attrs:{prop:"creationTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("timeFilter")(e.row.creationTime))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"提问内容"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.delete_state?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.onDel(e.row.id)}}},[t._v("删除")]):a("span",[t._v("问题不允许删除")])]}}])})],1)],1)],1)};S._withStripped=!0;var E={render:S,staticRenderFns:[]},I=E;var q=!1;var N=a("VU/8")(D,I,!1,function(t){q||a("HDPg")},"data-v-3e940106",null);N.options.__file="src/pages/love/questioncommit.vue";e.default=N.exports}});