webpackJsonp([19],{nNye:function(e,t,a){var n=a("x0B6");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("5f1582f4",n,!1,{})},vHLo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),l=a("exGp"),o=a.n(l),s=a("W/PC"),r={name:"Feedback",data:function(){return{tagType:{0:"danger",1:"warning",2:"info",3:"",4:"success"},status:-1,statusType:[{name:"全部",val:-1},{name:"已投诉待确认",val:0},{name:"已确认待处理",val:1},{name:"已处理",val:2},{name:"待评价",val:3},{name:"完成",val:4},{name:"已关闭",val:5}],doMainList:[],loading:!0,list:[],beginTime:"",endTime:"",Page:1,PageSize:10,nameFilter:"",classId:0,total:0,domainId:"",typeName:["全部","智能设备反馈","新用户心愿","优化建议","其他","服务投诉"]}},created:function(){this.getList(),this.getDoMainList()},methods:{selectChange:function(){this.Page=1,this.getList()},formatDate:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var n=e.getDate();n=n<10?"0"+n:n;var i=e.getHours(),l=e.getMinutes();return i=i<10?"0"+i:i,l=l<10?"0"+l:l,t+"-"+a+"-"+n},handleSizeChange:function(e){this.PageSize=e,this.getList()},handleCurrentChange:function(e){this.Page=e,this.getList()},getDoMainList:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.getDoMainList)();case 2:e.doMainList=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},getList:function(){var e=this;return o()(i.a.mark(function t(){var a,n,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(s.GetFeedbackList)({beginTime:e.beginTime?e.formatDate(e.beginTime):"",endTime:e.endTime?e.formatDate(e.endTime):"",type:0==e.classId?"":e.classId-1,page:e.Page,count:e.PageSize,domainId:e.domainId,status:e.status});case 3:a=t.sent,n=a.data,l=a.count,e.loading=!1,e.list=n,e.total=l;case 9:case"end":return t.stop()}},t,e)}))()},goView:function(e){this.$router.push({name:"feedbackView",params:{id:e}})}},beforeRouteEnter:function(e,t,a){a(function(e){"feedbackView"==t.name&&e.getList()})}},c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"feedback"},[a("div",{directives:[{name:"title",rawName:"v-title"}]},[e._v("反馈列表")]),e._v(" "),a("h3",[e._v("反馈列表")]),e._v(" "),a("el-card",{staticClass:"search-box"},[a("div",{staticClass:"searching"},[a("label",{attrs:{for:""}},[e._v("开始时间\n        "),a("el-date-picker",{attrs:{size:"large",type:"date",placeholder:"选择开始时间",format:"yyyy-MM-dd"},model:{value:e.beginTime,callback:function(t){e.beginTime=t},expression:"beginTime "}})],1),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束时间\n        "),a("el-date-picker",{attrs:{size:"large",type:"date",placeholder:"选择结束时间",format:"yyyy-MM-dd"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime "}})],1),e._v(" "),a("label",{attrs:{for:""}},[e._v("\n        反馈类型\n        "),a("el-select",{attrs:{placeholder:"选择类型"},on:{change:e.selectChange},model:{value:e.classId,callback:function(t){e.classId=t},expression:"classId"}},e._l(e.typeName,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),a("label",{attrs:{for:""}},[e._v("\n        门店\n        "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择门店"},on:{change:e.selectChange},model:{value:e.domainId,callback:function(t){e.domainId=t},expression:"domainId"}},e._l(e.doMainList,function(e){return a("el-option",{key:e.id,attrs:{label:e.displayName,value:e.id}})}))],1),e._v(" "),a("label",{attrs:{for:""}},[e._v("\n        状态\n        "),a("el-select",{attrs:{placeholder:"请选择状态"},on:{change:e.selectChange},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusType,function(e){return a("el-option",{key:e.val,attrs:{label:e.name,value:e.val}})}))],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1)]),e._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,border:"","element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",size:"small",stripe:!0}},[a("el-table-column",{attrs:{prop:"nickName",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userPhone",label:"手机号",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"occurTime",label:"事件发生时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(4==t.row.type?t.row.occurTime:"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"displayName",label:"发生门店名称","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"feedbackContent",label:"事件描述","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("stringSlice")(t.row.feedbackContent,100))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"反馈状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.tagType[t.row.status]}},[e._v(e._s(e._f("feedbackStateToText")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"反馈类型",width:"146"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.tagType[t.row.type]}},[e._v("\n            "+e._s(e._f("feedbackTypeToText")(t.row.type))+"\n            "),0==t.row.type?a("span",[e._v(e._s(0==t.row.equipType?"i Care":"i Bed"))]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lastModified",label:"创建时间",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-view",type:"info"},on:{click:function(a){e.goView(t.row.id)}}},[e._v("查看、处理")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.Page,"page-sizes":[10,30,50,100],"page-size":e.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)};c._withStripped=!0;var d={render:c,staticRenderFns:[]},u=d;var p=!1;var b=a("VU/8")(r,u,!1,function(e){p||a("nNye")},"data-v-b1177dd8",null);b.options.__file="src/pages/feedback/list.vue";t.default=b.exports},x0B6:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"\n.feedback[data-v-b1177dd8] {\n  width: calc(100vw - 280px);\n}\n.search-box[data-v-b1177dd8] {\n  margin-bottom: 10px;\n}\n.search-box .searching[data-v-b1177dd8] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.search-box .searching label[data-v-b1177dd8] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n.block[data-v-b1177dd8] {\n  margin-top: 10px;\n}\n","",{version:3,sources:["D:/git/vue-manage/src/pages/feedback/list.vue"],names:[],mappings:";AACA;EACE,2BAA2B;CAC5B;AACD;EACE,oBAAoB;CACrB;AACD;IACI,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,+BAA+B;IAC/B,8BAA8B;QAC1B,wBAAwB;YACpB,oBAAoB;CAC/B;AACD;MACM,oBAAoB;UAChB,YAAY;cACR,QAAQ;CACrB;AACD;EACE,iBAAiB;CAClB",file:"list.vue",sourcesContent:["\n.feedback[data-v-b1177dd8] {\n  width: calc(100vw - 280px);\n}\n.search-box[data-v-b1177dd8] {\n  margin-bottom: 10px;\n}\n.search-box .searching[data-v-b1177dd8] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.search-box .searching label[data-v-b1177dd8] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n.block[data-v-b1177dd8] {\n  margin-top: 10px;\n}\n"],sourceRoot:""}])}});