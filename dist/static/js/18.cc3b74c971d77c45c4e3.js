webpackJsonp([18],{"1cDG":function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Xxa5"),e=i.n(a),o=i("exGp"),A=i.n(o),s=i("W/PC"),c=i("Pnj0"),r={data:function(){return{info:{},typeName:{0:"服务投诉",1:"优化建议",2:"新用户心愿",3:"智能设备反馈",4:"其他"},imgId:"",types:{0:"非常满意",1:"满意",2:"不满意"},why:{0:"反馈态度不好",1:"处理时间过长",2:"问题没有有效解决",3:"其他"},activeImg:"",isShow:!1,remark:"",HttpHost:c.HttpHost}},created:function(){this.getFeedbackById()},methods:{getFeedbackById:function(){var n=this;return A()(e.a.mark(function t(){return e.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.getFeedbackById)(n.$route.params.id);case 2:n.info=t.sent;case 3:case"end":return t.stop()}},t,n)}))()},hide:function(){this.isShow=!1,this.remark=""},close:function(){if(!this.remark)return this.$message.error("请填写关闭原因");this.changeStatus(5,!0)},changeStatus:function(n){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return A()(e.a.mark(function a(){var o;return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o={feedbackId:t.info.id,status:n,userId:t.$store.state.Login.UserInfo.id,smsRequired:i,pictrueId:t.imgId,remark:t.remark},a.next=3,Object(s.changeStatus)(o);case 3:a.sent,t.remark="",t.isShow=!1,t.$message.success("提交成功"),t.getFeedbackById();case 8:case"end":return a.stop()}},a,t)}))()},upload:function(){var n=this,t=new FormData;t.append("uploadFile",this.$refs.upload.files[0]),this.http.post("iweb/api/feedBack/uploadEvaluationPicture",t,!1).then(function(t){n.imgId=t.data.id,n.$message.success("图片上传成功")}).catch(function(t){n.$message.error("图片上传失败")})}}},l=function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"view"},[i("h3",{staticClass:"page-title"},[n._v("\n    反馈详情\n    "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.$router.go(-1)}}},[n._v("返回")])],1),n._v(" "),i("el-card",[i("ul",{staticClass:"info-box"},[i("li",[i("b",[n._v("反馈状态：")]),n._v(n._s(n._f("feedbackStateToText")(n.info.status)))]),n._v(" "),i("li",[i("b",[n._v("反馈类型：")]),n._v(n._s(n._f("feedbackTypeToText")(n.info.type))),0==n.info.type?i("span",[n._v(n._s(0==n.info.equipType?"i Care":"i Bed"))]):n._e()]),n._v(" "),i("li",[i("b",[n._v("用户昵称：")]),n._v(n._s(n.info.nickName))]),n._v(" "),i("li",[i("b",[n._v("手机号：")]),n._v(n._s(n.info.userPhone))]),n._v(" "),4==n.info.type?[i("li",[i("b",[n._v("事件发生时间：")]),n._v(" "),i("div",[n._v(n._s(n.info.occurTime))])]),n._v(" "),i("li",[i("b",[n._v("门店名称：")]),n._v(" "),i("div",[n._v(n._s(n.info.displayName))])])]:n._e(),n._v(" "),i("li",[i("b",[n._v("事件描述：")]),n._v(" "),i("div",[n._v(n._s(n.info.feedbackContent))])]),n._v(" "),i("li",[i("b",[n._v("创建时间：")]),n._v(n._s(n.info.creationTime))]),n._v(" "),i("li",[i("b",[n._v("反馈图片:")]),n._v(" "),n.info.pictureIds?i("div",{staticClass:"img-box-list"},n._l(n.info.pictureIds.split(","),function(t,a){return i("div",{staticClass:"img-item",on:{click:function(i){n.activeImg=n.HttpHost+"iweb/api/feedBack/"+t+"?flag=1"}}},[i("img",{attrs:{src:n.HttpHost+"iweb/api/feedBack/"+t+"?flag=1",alt:""}})])})):i("span",[n._v("暂无")])]),n._v(" "),n.info.gwFeedbackEvaluations.length?i("li",[i("b",[n._v("用户评价内容:")]),n._v(" "),i("div",{staticClass:"content"},n._l(n.info.gwFeedbackEvaluations,function(t,a){return i("div",{key:a},[i("div",[i("span",[n._v("满意度：")]),n._v(n._s(n.types[t.status]))]),n._v(" "),2==t.status?i("div",[i("span",[n._v("不满意原因：")]),n._v(n._s(n.why[t.discontentReason]))]):n._e(),n._v(" "),i("div",[i("span",[n._v("评价内容：")]),n._v(n._s(t.content))])])}))]):n._e(),n._v(" "),4!=n.info.status?i("li",{staticStyle:{"margin-top":"10px"}},[i("b",[n._v("备注信息：")]),n._v(" "),i("div",[i("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:10},placeholder:"请填写备注信息(非必填)"},model:{value:n.remark,callback:function(t){n.remark=t},expression:"remark"}})],1)]):n._e(),n._v(" "),4==n.info.type?[4!=n.info.status?i("li",{staticStyle:{"margin-top":"20px"}},[i("b",[n._v("操作：")]),n._v(" "),0==n.info.status?i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.changeStatus(1,!0)}}},[n._v("第一次回访确认")]):n._e(),n._v(" "),1==n.info.status?i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.changeStatus(2)}}},[n._v("线下处理确认")]):n._e(),n._v(" "),2==n.info.status?i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.changeStatus(3,!0)}}},[n._v("第二次回访确认")]):n._e(),n._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.isShow=!0}}},[n._v("关闭")])],1):n._e(),n._v(" "),3==n.info.status?i("li",{staticStyle:{"margin-top":"10px"}},[i("b",[n._v("线下评价图上传")]),n._v(" "),i("div",[i("div",{staticClass:"upload-box",staticStyle:{"margin-bottom":"10px"}},[i("img",{attrs:{src:n.HttpHost+"iweb/api/feedBack/evaluation/"+n.imgId+"?flag=1",alt:""}}),n._v(" "),i("i",{staticClass:"el-icon-plus"}),n._v(" "),i("input",{ref:"upload",attrs:{type:"file"},on:{change:n.upload}})]),n._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.changeStatus(4)}}},[n._v("上传线下评价单")])],1)]):n._e()]:i("li",{staticStyle:{"margin-top":"20px"}},[i("b",[n._v("操作：")]),n._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){n.changeStatus(4,!0)}}},[n._v(n._s(n.info.smsFlag?"再次发送":"发")+"短信")])],1),n._v(" "),n.info.evaluationPicId?i("li",[i("b",[n._v("评价图片")]),n._v(" "),i("div",{staticClass:"img-box",on:{click:function(t){n.activeImg=n.HttpHost+"api/feedBack/evaluation/"+n.info.evaluationPicId+"?flag=1"}}},[i("img",{attrs:{src:n.HttpHost+"api/feedBack/evaluation/"+n.info.evaluationPicId+"?flag=1",alt:""}})])]):n._e()],2)]),n._v(" "),n.info.gwFeedbackFlowHistories.length?i("el-card",[i("h3",[n._v("历史操作查看")]),n._v(" "),i("ul",{staticClass:"history-list"},n._l(n.info.gwFeedbackFlowHistories,function(t,a){return i("li",[i("span",[n._v(n._s(a+1)+",\n           操作人："+n._s(t.nickName)+","),i("br"),n._v("\n           操作时间："+n._s(t.creationTime)+","),i("br"),n._v("\n           操作动作： "+n._s(n._f("feedbackStateToText")(t.handleStatus))+" ---\x3e "+n._s(n._f("feedbackStateToText")(t.toStatus))+" "),i("br"),n._v(" "),","!=t.remark&&t.remark?i("span",[n._v("\n               备注信息："+n._s(t.remark)+"\n           ")]):n._e()])])}))]):n._e(),n._v(" "),n.activeImg?i("div",{staticClass:"show-img-box",on:{click:function(t){n.activeImg=""}}},[i("img",{attrs:{src:n.activeImg,alt:""}})]):n._e(),n._v(" "),n.isShow?i("div",{staticClass:"close-box"},[i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"请输入关闭原因"},model:{value:n.remark,callback:function(t){n.remark=t},expression:"remark"}}),n._v(" "),i("div",{staticClass:"btn"},[i("el-button",{on:{click:function(t){n.isShow=!1}}},[n._v("取消")]),n._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:n.close}},[n._v("确认")])],1)],1)]):n._e()],1)};l._withStripped=!0;var d={render:l,staticRenderFns:[]},p=d;var f=!1;var C=i("VU/8")(r,p,!1,function(n){f||i("qeIO")},"data-v-c2f320ca",null);C.options.__file="src/pages/feedback/view.vue";t.default=C.exports},qeIO:function(n,t,i){var a=i("t5xF");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);i("rjj0")("71a78ad6",a,!1,{})},t5xF:function(n,t,i){(n.exports=i("FZ+f")(!0)).push([n.i,'\n@charset "UTF-8";\n.view[data-v-c2f320ca] {\n  width: calc(100vw - 280px);\n}\n.page-title[data-v-c2f320ca] {\n  line-height: 40px;\n}\n.page-title .el-button[data-v-c2f320ca] {\n    vertical-align: top;\n    margin-left: 10px;\n}\n.el-card[data-v-c2f320ca] {\n  margin-bottom: 10px;\n}\n.info-box[data-v-c2f320ca] {\n  padding-left: 0;\n}\n.info-box li[data-v-c2f320ca] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n    line-height: 36px;\n}\n.info-box li .content[data-v-c2f320ca] {\n      margin-top: 10px;\n      min-width: 300px;\n      border: 1px solid #ccc;\n      padding: 10px;\n      line-height: 24px;\n}\n.info-box li > div[data-v-c2f320ca] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n.info-box b[data-v-c2f320ca] {\n    display: inline-block;\n    width: 150px;\n    text-align: right;\n    margin-right: 10px;\n}\n.img-box-list[data-v-c2f320ca] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.img-box-list .img-item[data-v-c2f320ca] {\n    width: 120px;\n    height: 120px;\n    position: relative;\n    border: 1px solid #ccc;\n    margin-right: 10px;\n    cursor: pointer;\n}\n.img-box-list .img-item img[data-v-c2f320ca] {\n      max-height: 100%;\n      max-width: 100%;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      -webkit-transform: translate(-50%, -50%);\n              transform: translate(-50%, -50%);\n}\n/*图片上传*/\n.upload-box[data-v-c2f320ca] {\n  width: 200px;\n  height: 200px;\n  line-height: 200px;\n  position: relative;\n  border: 1px dashed #ccc;\n  font-size: 50px;\n  text-align: center;\n  overflow: hidden;\n}\n.upload-box img[data-v-c2f320ca] {\n    width: 100%;\n    height: 100%;\n}\n.upload-box input[data-v-c2f320ca] {\n    position: absolute;\n    top: -10%;\n    left: 0;\n    width: 200%;\n    height: 200%;\n    font-size: 0;\n    cursor: pointer;\n    opacity: 0;\n}\n.history-list li[data-v-c2f320ca] {\n  line-height: 30px;\n  margin-bottom: 10px;\n}\n.show-img-box[data-v-c2f320ca] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.show-img-box img[data-v-c2f320ca] {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    max-width: 80%;\n    max-height: 90%;\n}\n.close-box[data-v-c2f320ca] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.close-box .content[data-v-c2f320ca] {\n    width: 460px;\n    background: #fff;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    padding: 30px;\n    border-radius: 4px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.close-box .btn[data-v-c2f320ca] {\n    padding-top: 20px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n}\n',"",{version:3,sources:["D:/git/vue-manage/src/pages/feedback/view.vue"],names:[],mappings:";AACA,iBAAiB;AACjB;EACE,2BAA2B;CAC5B;AACD;EACE,kBAAkB;CACnB;AACD;IACI,oBAAoB;IACpB,kBAAkB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,gBAAgB;CACjB;AACD;IACI,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,+BAA+B;IAC/B,8BAA8B;QAC1B,wBAAwB;YACpB,oBAAoB;IAC5B,kBAAkB;CACrB;AACD;MACM,iBAAiB;MACjB,iBAAiB;MACjB,uBAAuB;MACvB,cAAc;MACd,kBAAkB;CACvB;AACD;MACM,oBAAoB;UAChB,YAAY;cACR,QAAQ;CACrB;AACD;IACI,sBAAsB;IACtB,aAAa;IACb,kBAAkB;IAClB,mBAAmB;CACtB;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,+BAA+B;EAC/B,8BAA8B;MAC1B,wBAAwB;UACpB,oBAAoB;CAC7B;AACD;IACI,aAAa;IACb,cAAc;IACd,mBAAmB;IACnB,uBAAuB;IACvB,mBAAmB;IACnB,gBAAgB;CACnB;AACD;MACM,iBAAiB;MACjB,gBAAgB;MAChB,mBAAmB;MACnB,UAAU;MACV,SAAS;MACT,yCAAyC;cACjC,iCAAiC;CAC9C;AACD,QAAQ;AACR;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,mBAAmB;EACnB,wBAAwB;EACxB,gBAAgB;EAChB,mBAAmB;EACnB,iBAAiB;CAClB;AACD;IACI,YAAY;IACZ,aAAa;CAChB;AACD;IACI,mBAAmB;IACnB,UAAU;IACV,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,aAAa;IACb,gBAAgB;IAChB,WAAW;CACd;AACD;EACE,kBAAkB;EAClB,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,OAAO;EACP,QAAQ;EACR,SAAS;EACT,UAAU;EACV,UAAU;EACV,+BAA+B;CAChC;AACD;IACI,mBAAmB;IACnB,UAAU;IACV,SAAS;IACT,yCAAyC;YACjC,iCAAiC;IACzC,eAAe;IACf,gBAAgB;CACnB;AACD;EACE,gBAAgB;EAChB,OAAO;EACP,QAAQ;EACR,SAAS;EACT,UAAU;EACV,UAAU;EACV,+BAA+B;CAChC;AACD;IACI,aAAa;IACb,iBAAiB;IACjB,mBAAmB;IACnB,UAAU;IACV,SAAS;IACT,yCAAyC;YACjC,iCAAiC;IACzC,cAAc;IACd,mBAAmB;IACnB,+BAA+B;YACvB,uBAAuB;CAClC;AACD;IACI,kBAAkB;IAClB,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,+BAA+B;IAC/B,8BAA8B;QAC1B,wBAAwB;YACpB,oBAAoB;IAC5B,0BAA0B;QACtB,uBAAuB;YACnB,+BAA+B;CAC1C",file:"view.vue",sourcesContent:['\n@charset "UTF-8";\n.view[data-v-c2f320ca] {\n  width: calc(100vw - 280px);\n}\n.page-title[data-v-c2f320ca] {\n  line-height: 40px;\n}\n.page-title .el-button[data-v-c2f320ca] {\n    vertical-align: top;\n    margin-left: 10px;\n}\n.el-card[data-v-c2f320ca] {\n  margin-bottom: 10px;\n}\n.info-box[data-v-c2f320ca] {\n  padding-left: 0;\n}\n.info-box li[data-v-c2f320ca] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n    line-height: 36px;\n}\n.info-box li .content[data-v-c2f320ca] {\n      margin-top: 10px;\n      min-width: 300px;\n      border: 1px solid #ccc;\n      padding: 10px;\n      line-height: 24px;\n}\n.info-box li > div[data-v-c2f320ca] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n.info-box b[data-v-c2f320ca] {\n    display: inline-block;\n    width: 150px;\n    text-align: right;\n    margin-right: 10px;\n}\n.img-box-list[data-v-c2f320ca] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.img-box-list .img-item[data-v-c2f320ca] {\n    width: 120px;\n    height: 120px;\n    position: relative;\n    border: 1px solid #ccc;\n    margin-right: 10px;\n    cursor: pointer;\n}\n.img-box-list .img-item img[data-v-c2f320ca] {\n      max-height: 100%;\n      max-width: 100%;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      -webkit-transform: translate(-50%, -50%);\n              transform: translate(-50%, -50%);\n}\n/*图片上传*/\n.upload-box[data-v-c2f320ca] {\n  width: 200px;\n  height: 200px;\n  line-height: 200px;\n  position: relative;\n  border: 1px dashed #ccc;\n  font-size: 50px;\n  text-align: center;\n  overflow: hidden;\n}\n.upload-box img[data-v-c2f320ca] {\n    width: 100%;\n    height: 100%;\n}\n.upload-box input[data-v-c2f320ca] {\n    position: absolute;\n    top: -10%;\n    left: 0;\n    width: 200%;\n    height: 200%;\n    font-size: 0;\n    cursor: pointer;\n    opacity: 0;\n}\n.history-list li[data-v-c2f320ca] {\n  line-height: 30px;\n  margin-bottom: 10px;\n}\n.show-img-box[data-v-c2f320ca] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.show-img-box img[data-v-c2f320ca] {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    max-width: 80%;\n    max-height: 90%;\n}\n.close-box[data-v-c2f320ca] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.close-box .content[data-v-c2f320ca] {\n    width: 460px;\n    background: #fff;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    padding: 30px;\n    border-radius: 4px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.close-box .btn[data-v-c2f320ca] {\n    padding-top: 20px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n}\n'],sourceRoot:""}])}});